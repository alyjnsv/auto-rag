# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LEANN –≤ auto-rag

–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é LEANN –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ LEANN?

[LEANN](https://github.com/yichuan-w/LEANN) - —ç—Ç–æ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **97% —ç–∫–æ–Ω–æ–º–∏—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞** –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –ë–î
- **100% –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ
- **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** —á–µ—Ä–µ–∑ graph-based selective recomputation
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

LEANN –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pip (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö)

```bash
pip install leann
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

LEANN –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `uv`:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uv –µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
pip install uv

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ LEANN —á–µ—Ä–µ–∑ uv
uv pip install leann
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
git clone https://github.com/yichuan-w/LEANN.git
cd LEANN
pip install -e .
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ:

```bash
pip install leann-core
pip install leann-backend-hnsw  # –∏–ª–∏ leann-backend-diskann
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
python -c "from leann import Builder, Searcher; print('LEANN —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!')"
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ —É–¥–∞—ë—Ç—Å—è, —Å–∏—Å—Ç–µ–º–∞ auto-rag –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å Pinecone –∏–ª–∏ –≤ —Ä–µ–∂–∏–º–µ dry-run. LEANN —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —Å LEANN

```bash
python main.py --backend leann
```

### –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏ –∏–Ω–¥–µ–∫—Å–∞

```bash
python main.py --backend leann --index-name my-documentation
```

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```bash
python main.py \
  --docs-path ./docs \
  --backend leann \
  --index-name project-docs \
  --report-file leann_report.json
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–æ–≤

LEANN —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø–∞–ø–∫–µ `.leann/indexes/`:

```
.leann/
‚îî‚îÄ‚îÄ indexes/
    ‚îú‚îÄ‚îÄ my-documentation/
    ‚îÇ   ‚îú‚îÄ‚îÄ index.hnsw
    ‚îÇ   ‚îî‚îÄ‚îÄ metadata.json
    ‚îî‚îÄ‚îÄ project-docs/
        ‚îî‚îÄ‚îÄ ...
```

## üîç –ü–æ–∏—Å–∫ –≤ –∏–Ω–¥–µ–∫—Å–µ (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ)

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –ø–æ–∏—Å–∫–∞:

```python
from vector_store import get_vector_store

# –°–æ–∑–¥–∞—ë–º LEANN store
store = get_vector_store(backend='leann')

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å
store.current_index_name = 'my-documentation'
store.searcher = Searcher(index_path='.leann/indexes/my-documentation')

# –ü–æ–∏—Å–∫
results = store.search("–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ", top_k=5)
for result in results:
    print(f"–¢–µ–∫—Å—Ç: {result['text']}")
    print(f"–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: {result['metadata']}")
    print(f"Score: {result['score']}")
```

## üéØ –ü–æ—á–µ–º—É LEANN?

LEANN –≤—ã–±—Ä–∞–Ω –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è auto-rag –±–ª–∞–≥–æ–¥–∞—Ä—è:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | LEANN |
|----------------|-------|
| **–•—Ä–∞–Ω–∏–ª–∏—â–µ** | Graph —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (97% —ç–∫–æ–Ω–æ–º–∏—è) |
| **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** | 100% –ª–æ–∫–∞–ª—å–Ω–æ |
| **API –∫–ª—é—á–∏** | –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| **–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞** | –ë—ã—Å—Ç—Ä–∞—è (selective recomputation) |
| **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è + —Ñ–∏–ª—å—Ç—Ä—ã |
| **–£—Å—Ç–∞–Ω–æ–≤–∫–∞** | –ü—Ä–æ—Å—Ç–∞—è (—á–µ—Ä–µ–∑ uv –∏–ª–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤) |

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LEANN

### –í—ã–±–æ—Ä –±—ç–∫–µ–Ω–¥–∞ –∏–Ω–¥–µ–∫—Å–∞

–í `vector_store.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±—ç–∫–µ–Ω–¥ LEANN:

```python
# HNSW (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
self.builder = Builder(
    index_path=str(index_path),
    embedding_model="facebook/contriever",
    backend="hnsw"
)

# DiskANN - –ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞
self.builder = Builder(
    index_path=str(index_path),
    embedding_model="facebook/contriever",
    backend="diskann"
)
```

### –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

LEANN –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `facebook/contriever`. –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

```python
self.builder = Builder(
    index_path=str(index_path),
    embedding_model="sentence-transformers/all-MiniLM-L6-v2",  # –î—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å
    backend="hnsw"
)
```

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º

LEANN –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º:

```python
results = store.searcher.search(
    query="–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
    top_k=5,
    metadata_filters={
        "doc_id": {"==": "ml-guide"},
        "tag": {"in": ["Introduction", "Basics"]}
    }
)
```

### Grep –ø–æ–∏—Å–∫ (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)

–î–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ—á–Ω—ã—Ö —Ñ—Ä–∞–∑:

```python
results = store.searcher.search(
    query="def authenticate_user",
    use_grep=True,
    top_k=1
)
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –≠–∫–æ–Ω–æ–º–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

| –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö | –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –ë–î | LEANN | –≠–∫–æ–Ω–æ–º–∏—è |
|---------------|-----------------|-------|----------|
| 2.1M –≤–µ–∫—Ç–æ—Ä–æ–≤ | 3.8 GB | 324 MB | 91% |
| 60M –≤–µ–∫—Ç–æ—Ä–æ–≤ | 201 GB | 6 GB | 97% |

### –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞

- **HNSW**: –û–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤
- **DiskANN**: –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "LEANN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

```bash
pip install leann
```

### –û—à–∏–±–∫–∞: "Index not found"

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –±—ã–ª —Å–æ–∑–¥–∞–Ω:

```bash
python main.py --backend leann --index-name my-docs
```

### –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DiskANN –±—ç–∫–µ–Ω–¥ –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å complexity:

```python
self.builder = Builder(
    index_path=str(index_path),
    backend="diskann",
    complexity=128  # –£–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è –ª—É—á—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
)
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π LEANN](https://github.com/yichuan-w/LEANN)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è LEANN](https://github.com/yichuan-w/LEANN#readme)
- [–ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](https://github.com/yichuan-w/LEANN#benchmarks)

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
python main.py \
  --docs-path ./project-docs \
  --backend leann \
  --index-name project-docs
```

### –ü–æ–∏—Å–∫ –≤ –∏–Ω–¥–µ–∫—Å–µ —á–µ—Ä–µ–∑ Python

```python
from leann import Searcher

searcher = Searcher(index_path='.leann/indexes/project-docs')
results = searcher.search("–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å API", top_k=3)

for r in results:
    print(f"–ù–∞–π–¥–µ–Ω–æ: {r['text'][:100]}...")
    print(f"–î–æ–∫—É–º–µ–Ω—Ç: {r['metadata']['doc_id']}")
```

---

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å LEANN! üöÄ**
